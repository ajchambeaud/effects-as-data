{"version":3,"sources":["../../src/helpers/end-with-payload.js"],"names":[],"mappings":";;eAA8B,OAAO,CAAC,YAAY,CAAC;;IAA3C,KAAK,YAAL,KAAK;IAAE,UAAU,YAAV,UAAU;;AAEzB,SAAS,cAAc,CAAE,GAAG,EAAE,YAAY,EAAE;AAC1C,MAAM,WAAW,GAAG,YAAY,KAAK,SAAS,CAAA;AAC9C,SAAO,gBAA6B;QAAlB,OAAO,QAAP,OAAO;QAAE,MAAM,QAAN,MAAM;;AAC/B,QAAI,MAAM,CAAC,GAAG,CAAC,EAAE;AACf,UAAI,WAAW,EAAE;AACf,eAAO,KAAK,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAA;OAC1B,MAAM;AACL,eAAO,CAAC,UAAU,CAAC,YAAY,CAAC,CAAC,CAAA;OAClC;KACF,MAAM;AACL,aAAO,UAAU,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,CAAA;KAChC;GACF,CAAA;CACF;;AAED,MAAM,CAAC,OAAO,GAAG;AACf,gBAAc,EAAd,cAAc;CACf,CAAA","file":"end-with-payload.js","sourcesContent":["const { panic, setPayload } = require('../actions')\n\nfunction endWithPayload (key, defaultValue) {\n  const shouldPanic = defaultValue === undefined\n  return function ({context, errors}) {\n    if (errors[key]) {\n      if (shouldPanic) {\n        return panic(errors[key])\n      } else {\n        return [setPayload(defaultValue)]\n      }\n    } else {\n      return setPayload(context[key])\n    }\n  }\n}\n\nmodule.exports = {\n  endWithPayload\n}\n"]}