{"version":3,"sources":["../../src/helpers/result-to-context.js"],"names":[],"mappings":";;;;eAAyB,OAAO,CAAC,OAAO,CAAC;;IAAjC,OAAO,YAAP,OAAO;IAAE,GAAG,YAAH,GAAG;;gBACY,OAAO,CAAC,YAAY,CAAC;;IAA7C,KAAK,aAAL,KAAK;IAAE,YAAY,aAAZ,YAAY;;AAE3B,SAAS,eAAe,CAAE,IAAI,EAAE;AAC9B,MAAI,KAAK,GAAG,OAAO,CAAC,IAAI,CAAC,CAAA;AACzB,SAAO,gBAA6B;QAAlB,OAAO,QAAP,OAAO;QAAE,MAAM,QAAN,MAAM;;AAC/B,QAAI,OAAO,GAAG,GAAG,CAAC,iBAAkB;;;UAAhB,GAAG;UAAE,KAAK;;AAC5B,UAAI,MAAM,CAAC,GAAG,CAAC,EAAE;AACf,eAAO,KAAK,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAA;OAC1B;;AAED,UAAI,OAAO,CAAC,GAAG,CAAC,EAAE;AAChB,YAAI,CAAC,GAAG,EAAE,CAAA;AACV,SAAC,CAAC,KAAK,CAAC,GAAG,OAAO,CAAC,GAAG,CAAC,CAAA;AACvB,eAAO,YAAY,CAAC,CAAC,CAAC,CAAA;OACvB;KACF,EAAE,KAAK,CAAC,CAAA;;AAET,WAAO,OAAO,CAAC,MAAM,CAAC,UAAA,CAAC;aAAI,CAAC;KAAA,CAAC,CAAA;GAC9B,CAAA;CACF;;AAED,MAAM,CAAC,OAAO,GAAG;AACf,iBAAe,EAAf,eAAe;CAChB,CAAA","file":"result-to-context.js","sourcesContent":["const { toPairs, map } = require('ramda')\nconst { panic, addToContext } = require('../actions')\n\nfunction resultToContext (keys) {\n  let pairs = toPairs(keys)\n  return function ({context, errors}) {\n    let actions = map(([key, toKey]) => {\n      if (errors[key]) {\n        return panic(errors[key])\n      }\n\n      if (context[key]) {\n        let p = {}\n        p[toKey] = context[key]\n        return addToContext(p)\n      }\n    }, pairs)\n\n    return actions.filter(v => v)\n  }\n}\n\nmodule.exports = {\n  resultToContext\n}\n"]}